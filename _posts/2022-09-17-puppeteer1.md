---
title: "[PUPPETEER] PUPPETEERì— ëŒ€í•œ ì •ë¦¬ 1"
excerpt: "PUPPETEERì— ëŒ€í•´ì„œ"

categories:
  - PUPPETEER
  - Node.js
tags:
  - [PUPPETEER, Node.js]

toc: true
toc_sticky: true

date: 2022-09-17
last_modified_at: 2022-09-17
---

ì˜¤ëŠ˜ì€ ìµœê·¼ì— ì‚¬ìš©í•˜ê²Œ ëœ `PUPPETEER`ì— ëŒ€í•œ ì •ë¦¬ë¥¼ í•´ë³´ë ¤ê³  í•œë‹¤.

`PUPPETEER`ëŠ” êµ¬ê¸€ì—ì„œ ë§Œë“¤ì—ˆë‹¤ê³  í•œë‹¤. ~~êµ¬ê¸€ê°“~~

`PUPPETEER`ëŠ” ì›¹ í¬ë¡¤ë§? ìŠ¤í¬ë©?ì„ í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì£¼ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ì´ë‹¤.

ìµœê·¼ ì‚¬ìš©í•´ ë´¤ì„ ë•Œ í•  ìˆ˜ ìˆëŠ” ë™ì‘ë“¤ì´ êµ‰ì¥íˆ ë§ì•˜ë‹¤.

ë§ˆìš°ìŠ¤ ì™¼ìª½ ì˜¤ë¥¸ìª½ í´ë¦­, í˜ì´ì§€ ì´ë™, ìë°”ìŠ¤í¬ë¦½íŠ¸ í•¨ìˆ˜ ì‹¤í–‰ ë“± ê±°ì˜ ì‚¬ëŒì´ í˜ì´ì§€ì— ë“¤ì–´ê°€ì„œ

í•  ìˆ˜ ìˆëŠ” ë™ì‘ë“¤ì„ ë‹¤ í•œë‹¤ê³  ìƒê°í•˜ë©´ ë  ê²ƒ ê°™ë‹¤.

ì˜¤ëŠ˜ ì •ë¦¬í•˜ëŠ” ê²ƒë„ ë‚´ê°€ ì‚¬ìš© í•´ë´¤ë˜ ê²ƒë“¤ ìœ„ì£¼ë¡œ ì •ë¦¬ë¥¼ í•´ë³¼ ì˜ˆì •ì´ë‹¤.

> PUPPETEER? PUPPETEER-CORE?

`PUPPETEER`ë¥¼ ì‚¬ìš©í•˜ê¸° ì „ì— ë‘ ê°€ì§€ ë²„ì „ì´ ìˆëŠ”ë° `PUPPETEER`ì™€ `PUPPETEER-CORE`ê°€ ìˆë‹¤.

ì´ ë‘ ê°€ì§€ ë²„ì „ì€ ë¹„ìŠ·í•˜ì§€ë§Œ ì°¨ì´ì ì€ ì„¤ì¹˜ ì‹œ `PUPPETEER`ëŠ” `*Chromium`ì„ í¬í•¨í•´ ì„¤ì¹˜ê°€ ë˜ê³ ,

`PUPPETEER-CORE`ëŠ” `Chromium`ì„ í¬í•¨í•˜ì§€ ì•Šê³  ì„¤ì¹˜ê°€ ëœë‹¤.

ğŸ’¡ [`Chromium` ì´ë€?](<https://ko.wikipedia.org/wiki/%ED%81%AC%EB%A1%9C%EB%AF%B8%EC%97%84_(%EC%9B%B9_%EB%B8%8C%EB%9D%BC%EC%9A%B0%EC%A0%80)>)

ì´ê±° ë§ê³ ëŠ” `PUPPETEER_*` í™˜ê²½ ë³€ìˆ˜ë“¤ì„ ì‚¬ìš©ì—¬ë¶€ ì°¨ì´ê°€ ìˆë‹¤.

`PUPPETEER-CORE`ëŠ” `PUPPETEER`ì˜ ê²½ëŸ‰í™” ë²„ì „ì´ë¼ê³  ë³´ë©´ ë  ê²ƒ ê°™ë‹¤.

> ì‹œì‘í•˜ê¸°

ê·¸ëŸ¼ ê°„ë‹¨í•˜ê²Œ ê¸°ë³¸ì ì¸ ì½”ë“œë¥¼ ë¨¼ì € ë´ë³´ì.

```javascript
const puppeteer = require("puppeteer"); // === import puppeteer from 'puppeteer';

const puppeteerInit = async () => {
  // headless : true ë¸Œë¼ìš°ì €ë¥¼ ë³´ì´ê²Œ í•˜ì§€ ì•Šê³  ì‹¤í–‰ // false ë³´ì´ê²Œ ì‹¤í–‰
  const browser = await puppeteer.launch({ headless: false });
  // browser.newPage()ë¥¼ í•˜ê²Œ ë˜ë©´ ê¸°ë³¸ íƒ­í•œê°œì— ìƒˆë¡œìš´ íƒ­ í•˜ë‚˜ê°€ ë” ìƒì„±ì´ ë˜ì–´ì„œ (browser.pages)[0]ë¥¼ ì‚¬ìš©í•˜ê²Œ ëë‹¤.
  const page = await browser.pages[0];
  // ì´ë™í•  urlì— protocol(http ë˜ëŠ” https)ì´ ì—†ìœ¼ë©´ ì˜¤ë¥˜ ë°œìƒ
  await page.goto("ì´ë™í•  url", { waitUntil: "networkIdle2" });

  await browser.close();
};
```

ì¼ë‹¨ ê°„ë‹¨í•˜ê²Œ í˜ì´ì§€ë¥¼ ì´ë™ì‹œí‚¤ê¸°ë§Œ í•´ë³´ì•˜ë‹¤.

`page.goto` ì½”ë“œ ë¶€ë¶„ì— `waitUntil`ì€ í˜ì´ì§€ë¥¼ ì´ë™ í›„ ë‹¤ìŒ ë™ì‘ì„ í•˜ê¸° ì „ê¹Œì§€ ê¸°ë‹¤ë¦¬ê²Œ í•˜ëŠ” ì†ì„±ì´ë‹¤.

ì†ì„±ì—ëŠ” 4ê°€ì§€ê°€ ìˆëŠ”ë° ë‹¤ìŒê³¼ ê°™ë‹¤.

`networkIdle0` : ìµœì†Œí•œ 500ms ë™ì•ˆ ë„¤íŠ¸ì›Œí¬ ì—°ê²°ì´ 0ê°œ ì´ìƒ ì—†ì„ ë•Œ íƒìƒ‰ ì™„ë£Œë¡œ ê°„ì£¼(SPA í˜ì´ì§€ì— ì‚¬ìš©)

`networkidle2` : ìµœì†Œí•œ 500ms ë™ì•ˆ ë‘ ê°œ ì´ìƒì˜ ë„¤íŠ¸ì›Œí¬ ì—°ê²°ì´ ì—†ì„ ë•Œ íƒìƒ‰ ì™„ë£Œë¡œ ê°„ì£¼

`domcontentload` : HTML ë¬¸ì„œê°€ ë‹¤ ë¡œë“œ ë˜ê³  DOM íŠ¸ë¦¬ê°€ ì™„ë£Œ ë˜ì—ˆì„ ë•Œ

`load` : load ì´ë²¤íŠ¸ê°€ ì™„ë£Œ ë˜ì—ˆì„ ë•Œ

`domcontentload`ì™€ `load`ëŠ” ê°œë°œì ë„êµ¬ì—ì„œ í™•ì¸ì´ ê°€ëŠ¥í•œë° ì´ê²Œ ë§ëŠ” ê±´ì§€ëŠ” ì •í™•íˆ ëª¨ë¥´ê² ë‹¤..!

![domcontentload](https://user-images.githubusercontent.com/11023303/190854800-e372083c-0c63-4c6c-b6ef-72a1f65bd37b.png)

ê·¸ë¦¬ê³  `goto` ì™¸ì—ë„ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ì œì–´ ë™ì‘ë“¤ì´ `click`, `type` ë“± ì—¬ëŸ¬ê°€ì§€ê°€ ìˆë‹¤.

`click`ê³¼ `type`ì„ ì‚¬ìš©í•  ë•ŒëŠ” ë‚´ê°€ ë¬´ì—‡ì„ í´ë¦­ í•´ì•¼í• ì§€ë¥¼ ì•Œë ¤ì¤˜ì•¼ í•˜ëŠ”ë° ì•Œë ¤ì£¼ëŠ”

ë°©ë²•ìœ¼ë¡œëŠ” `selector`ë¥¼ ì‚¬ìš©í•˜ë©´ ëœë‹¤. `jquery`ì—ì„œ ë‚´ê°€ ì‚¬ìš©í•˜ê³  ì‹¶ì€ ì„ íƒìë¥¼ ë„£ë“¯ì´ í•˜ë©´ëœë‹¤ !

```javascript
const puppeteer = require("puppeteer");

const puppeteerInit = async () => {
  const browser = await puppeteer.launch({ headless: false });
  const page = await browser.pages[0];

  // í˜ì´ì§€ ì´ë™í›„ waitUntil
  await page.goto("https://www.naver.com/", { waitUntil: "networkIdle2" });

  // ì•„ë˜ ì‚¬ì§„ê³¼ ê°™ì´ ë³µì‚¬ í›„ ë¶™ì—¬ ë„£ê¸°
  await page.click("#account > a");

  await browser.close();
};
```

![naverLoginSelector](https://user-images.githubusercontent.com/11023303/190854488-5ee1037a-276d-46f4-9f9f-e3022a7b3937.png)

ìœ„ ì‚¬ì§„ì²˜ëŸ¼ `selector`ë¥¼ ë³µì‚¬ í›„ `click` í•¨ìˆ˜ì•ˆì— ë„£ì–´ì£¼ë©´ ëì´ë‹¤.

`type`ë„ ë§ˆì°¬ê°€ì§€ë¡œ `selector`ë¥¼ ë„£ì–´ì¤€ í›„ ë‘ë²ˆì§¸ ì¸ìì— ë‚´ê°€ ì…ë ¥í•  ë¬¸ìì—´ì„ ë„£ì–´ì£¼ë©´ ëœë‹¤.

ì—¬ê¸°ì„  ê²€ìƒ‰ì°½ì— íƒ€ì´í•‘ì„ í•˜ëŠ” ê²ƒìœ¼ë¡œ í•´ë³´ê² ë‹¤.

```javascript
const puppeteer = require("puppeteer");

const puppeteerInit = async () => {
  const browser = await puppeteer.launch({ headless: false });
  const page = await browser.pages[0];

  await page.goto("https://www.naver.com/", { waitUntil: "networkIdle2" });

  // #queryëŠ” ë„¤ì´ë²„ ê²€ìƒ‰ì°½ì˜ css selector
  await page.type("#query", "ì•ˆë…•í•˜ì„¸ìš”");

  // ê²€ìƒ‰ì–´ ì…ë ¥ í›„ ì—”í„°
  await page.keyboard.press("Enter");

  await browser.close();
};
```

`puppeteer`ëŠ” ì´ê²ƒë§Œ ê°€ëŠ¥ í•œ ê²ƒì´ ì•„ë‹ˆë¼ í™œìš©í•˜ë©´ ì—„ì²­ë‚œ í¬ë¡¤ëŸ¬ë¥¼ ë§Œë“¤ ìˆ˜ ìˆì„ ê²ƒ ê°™ë‹¤.

ë‹¤ìŒ ì •ë¦¬ ë•ŒëŠ” `$, $$, $eval, $$eval` ì´ë¼ëŠ” í‚¤ì›Œë“œì— ëŒ€í•´ì„œ ì•Œì•„ë³¼ ì˜ˆì •ì´ë‹¤ ~!
